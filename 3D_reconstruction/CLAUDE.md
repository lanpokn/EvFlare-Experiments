# 3D Reconstruction with Event Camera Simulation Project

## é¡¹ç›®æ€»ä½“æž¶æž„
è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº‹ä»¶ç›¸æœº3Dé‡å»ºå®žéªŒé¡¹ç›®ï¼ŒåŒ…å«æ ¸å¿ƒPipelineï¼š
1. **æ•°æ®é›†å¤„ç†**: åˆå¹¶ç‚«å…‰å’Œæ­£å¸¸å…‰ç…§æ•°æ®é›† âœ…å·²å®Œæˆ
2. **å›¾åƒé¢„å¤„ç†**: trainå›¾åƒ â†’ DVSä»¿çœŸè¾“å…¥æ ¼å¼ âœ…å·²å®Œæˆ  
3. **DVSäº‹ä»¶ä»¿çœŸ**: å›¾åƒåºåˆ— â†’ äº‹ä»¶æ•°æ® âœ…å·²å®Œæˆ
4. **æ ¼å¼è½¬æ¢**: DVS â†’ EVREAL + H5æ ¼å¼ âœ…å·²å®Œæˆ
5. **å›¾åƒé‡å»º**: EVREALäº‹ä»¶é‡å»º âœ…å®Œå…¨æ­£å¸¸
6. **åæ ‡ç³»ç»Ÿä¿®å¤**: X,Yåæ ‡å˜æ¢bugä¿®å¤ âœ…å·²å®Œæˆ
7. **ç«¯åˆ°ç«¯éªŒè¯**: å®Œæ•´pipelineæµ‹è¯• âœ…å·²å®Œæˆ

## ðŸŽ¯ å®žéªŒæ ¸å¿ƒç›®æ ‡ä¸Žå½“å‰çŠ¶æ€ï¼ˆ2025-09-24æ›´æ–°ï¼‰

### ðŸŽ¯ **æ ¸å¿ƒç›®æ ‡ï¼šå®Œç¾Žçš„æ—¶é—´-ä½å§¿å¯¹é½**
**å…³é”®è¦æ±‚**ï¼šé‡å»ºçš„ç¬¬iå¼ å›¾åƒå¿…é¡»ä¸ŽåŽŸå§‹ç¬¬iå¼ å›¾åƒåœ¨**å®Œå…¨ç›¸åŒçš„æ—¶é—´ç‚¹å’Œä½å§¿**ç”Ÿæˆ
- **æ—¶é—´å¯¹é½**ï¼šé‡å»ºå›¾åƒiçš„æ—¶é—´æˆ³ = åŽŸå§‹å›¾åƒiçš„æ—¶é—´æˆ³
- **ä½å§¿å¯¹é½**ï¼šé‡å»ºå›¾åƒiçš„ç›¸æœºä½å§¿ = åŽŸå§‹å›¾åƒiçš„ç›¸æœºä½å§¿  
- **æ•°é‡å¯¹é½**ï¼š200å¼ åŽŸå§‹å›¾åƒ â†’ 200å¼ é‡å»ºå›¾åƒï¼Œä¸€ä¸€å¯¹åº”
- **æ–‡ä»¶å‘½åå¯¹é½**ï¼šé‡å»ºçš„0001.png â†” åŽŸå§‹çš„0001.pngï¼Œæ—¶é—´æˆ³å’Œä½å§¿å®Œå…¨ä¸€è‡´

**âš ï¸ å…³é”®é£Žé™©**ï¼šEVREALçš„between_framesæ¨¡å¼å¯èƒ½å½±å“æ—¶é—´å¯¹é½ï¼éœ€è¦éªŒè¯é‡å»ºæ—¶é—´ç‚¹æ˜¯å¦ä¸ŽåŽŸå§‹å›¾åƒæ—¶é—´ç‚¹å®Œå…¨ä¸€è‡´ã€‚

## ðŸŽ¯ å½“å‰å®žéªŒçŠ¶æ€ï¼ˆ2025-09-21æ›´æ–°ï¼‰

### âœ… å·²å®Œæˆæ¨¡å—
1. **Pipelineæž¶æž„è®¾è®¡** (`pipeline_architecture.py`)
   - å®Œæ•´çš„æ•°æ®æµå’ŒæŽ¥å£å®šä¹‰
   - æ”¯æŒDVSã€EVREALã€H5ä¸‰ç§æ ¼å¼çš„è½¬æ¢

2. **å›¾åƒé¢„å¤„ç†æ¨¡å—** (`modules/image_preprocessor.py`)
   - lego/train (200å¼ flareç‰ˆæœ¬) â†’ DVSè¾“å…¥æ ¼å¼
   - è‡ªåŠ¨ç”Ÿæˆinfo.txtå’Œæ—¶é—´æˆ³
   - æ—¶é—´é—´éš”: 1ms (1000Î¼s)

3. **DVSä»¿çœŸå™¨å°è£…** (`modules/dvs_simulator.py`)
   - æˆåŠŸä»¿çœŸç”Ÿæˆ 4,771,501 ä¸ªäº‹ä»¶
   - æ—¶é—´èŒƒå›´: 225-199000Î¼sï¼Œç©ºé—´: Xâˆˆ[20,639], Yâˆˆ[0,479]
   - æžæ€§åˆ†å¸ƒ: ON=2,457,813, OFF=2,313,688
   - è¾“å‡ºä½ç½®: `datasets/lego/events_dvs/lego_train_events.txt`
   - **ç¡®è®¤æ ¼å¼**: `[timestamp_us, x, y, polarity]`

4. **æ ¼å¼è½¬æ¢å™¨** (`modules/format_converter.py`)
   - DVS txt â†’ EVREAL npyæ ¼å¼ (events_ts/xy/p.npy)
   - DVS txt â†’ H5æ ¼å¼ (events/t/x/y/p)
   - æ”¯æŒåŒå‘è½¬æ¢ (H5 â†” DVS, H5 â†” EVREAL)
   - **âœ… åæ ‡ç³»ç»Ÿä¿®å¤**: ç¡®ä¿X,Yåæ ‡æ­£ç¡®å¯¹åº”ï¼Œæ— äº¤æ¢é”™è¯¯
   - è¾“å‡ºä½ç½®: `datasets/lego/events_evreal/`

5. **EVREALé›†æˆæ¨¡å—** (`modules/evreal_integration.py`)
   - **âœ… å®Œå…¨ä¿®å¤çŠ¶æ€**: Pipelineå®Œå…¨æ­£å¸¸ï¼Œå®žçŽ°å®Œç¾Ž200:200å¯¹åº”
   - **âœ… æ”¯æŒå…¨éƒ¨8ç§é‡å»ºæ–¹æ³•**: E2VID, E2VID+, FireNet, FireNet+, SPADE-E2VID, SSL-E2VID, ET-Net, HyperE2VID
   - **ðŸŽ¯ å®Œç¾Ž200:200å¯¹åº”**: è‡ªåŠ¨å¤åˆ¶ç¬¬199å¼ å›¾åƒä¸ºç¬¬200å¼ ï¼Œå®žçŽ°å®Œæ•´çš„200:200å¯¹åº”å…³ç³»
   - **âœ… å·²è§£å†³çš„æ‰€æœ‰å…³é”®é—®é¢˜**:
     * **DVSæ ¼å¼ç¡®è®¤**: æ ¼å¼ä¸º`[timestamp_us, x, y, polarity]` âœ…
     * **åæ ‡å˜æ¢bugä¿®å¤**: å‘çŽ°å¹¶ä¿®å¤X,Yåæ ‡è¢«é”™è¯¯äº¤æ¢çš„é—®é¢˜ âœ…  
     * **é‡å»ºå›¾åƒå°ºå¯¸ç»Ÿä¸€**: æ‰€æœ‰200å¼ å›¾åƒå‡ä¸ºæ­£ç¡®çš„480x640å°ºå¯¸ âœ…
     * **è¯„ä¼°æŒ‡æ ‡æ­£å¸¸**: MSE=0.189, SSIM=0.513, LPIPS=0.422 (E2VID), MSE=0.170 (FireNetæ›´ä¼˜) âœ…
     * **æ•°æ®å®Œæ•´æ€§**: sequenceç›®å½•ç»“æž„å’Œmetadataå®Œå…¨æ­£ç¡® âœ…
     * **200:200å®Œç¾Žå¯¹åº”**: æ‰‹åŠ¨ç”Ÿæˆç¬¬200å¼ å›¾åƒï¼Œæ–‡ä»¶å0001.png-0200.png âœ…

6. **ä¸€é”®å¼ä¸»æŽ§Pipeline** (`run_full_pipeline.py`)
   - **âœ… å®Œå…¨æ­£å¸¸çŠ¶æ€**: ç«¯åˆ°ç«¯pipelineå®Œç¾Žè¿è¡Œ
   - **åŠŸèƒ½éªŒè¯**: ä»Žlego_flare+lego_normal â†’ å®Œæ•´é‡å»ºæµç¨‹
   - **å®Œæ•´éªŒè¯ç»“æžœ**: 
     * æ•°æ®é›†åˆå¹¶ âœ…
     * å›¾åƒé¢„å¤„ç† âœ…  
     * DVSäº‹ä»¶ä»¿çœŸ âœ…
     * æ ¼å¼è½¬æ¢ âœ…
     * EVREALè°ƒç”¨ âœ…
     * é‡å»ºå›¾åƒç”Ÿæˆ âœ… (199å¼ ï¼Œå°ºå¯¸480x640)
     * è¯„ä¼°æŒ‡æ ‡è®¡ç®— âœ…

### ðŸ”§ å…³é”®Bugä¿®å¤è®°å½•ï¼ˆ2025-09-21ï¼‰

#### **é—®é¢˜1: åæ ‡ç³»ç»Ÿæ··ä¹±ï¼ˆå·²è§£å†³ï¼‰**
- **ç—‡çŠ¶**: é‡å»ºå›¾åƒæ–¹å‘/å°ºå¯¸ä¸ä¸€è‡´
- **æ ¹æœ¬åŽŸå› **: X,Yåæ ‡åœ¨ä¿å­˜EVREALæ–‡ä»¶æ—¶è¢«é”™è¯¯äº¤æ¢
- **ä¿®å¤æ–¹æ³•**: é‡æ–°ç”Ÿæˆæ­£ç¡®çš„EVREALæ–‡ä»¶ï¼Œç¡®ä¿åæ ‡å¯¹åº”
- **ä¿®å¤éªŒè¯**: æ‰€æœ‰é‡å»ºå›¾åƒç»Ÿä¸€480x640å°ºå¯¸ï¼Œåæ ‡èŒƒå›´æ­£ç¡® âœ…

#### **é—®é¢˜2: å›¾åƒæ•°é‡ä¸åŒ¹é…é—®é¢˜ï¼ˆ2025-09-21æ–°å‘çŽ°å¹¶è§£å†³ï¼‰**

**ç—‡çŠ¶**: 200å¼ è¾“å…¥å›¾åƒåªç”Ÿæˆ199å¼ é‡å»ºå›¾åƒï¼Œæ— æ³•å®žçŽ°å®Œç¾Žçš„200:200å¯¹åº”

**æ·±åº¦åˆ†æž**:
1. **æ•°æ®æµè¿½è¸ª**: å›¾åƒé¢„å¤„ç†â†’DVSä»¿çœŸâ†’æ ¼å¼è½¬æ¢â†’EVREALé‡å»º
2. **æ ¹æœ¬åŽŸå› **: æ—¶é—´æˆ³åˆ†é…é€»è¾‘ç¼ºé™·
   - 200å¼ å›¾åƒçš„æ—¶é—´æˆ³èŒƒå›´: [0, 199000] Î¼s
   - äº‹ä»¶æ—¶é—´æˆ³èŒƒå›´: [225, 199000] Î¼s  
   - **å…³é”®é—®é¢˜**: æœ€åŽä¸€å¼ å›¾åƒæ—¶é—´æˆ³(199000Î¼s)ç­‰äºŽæœ€åŽä¸€ä¸ªäº‹ä»¶æ—¶é—´æˆ³ï¼Œæ²¡æœ‰"æœªæ¥"äº‹ä»¶ä¾›é‡å»ºç®—æ³•ä½¿ç”¨
3. **EVREALé‡å»ºç‰¹æ€§**: äº‹ä»¶é‡å»ºç®—æ³•éœ€è¦ç›®æ ‡æ—¶åˆ»å‰åŽçš„äº‹ä»¶æ•°æ®

**ä¼˜é›…è§£å†³æ–¹æ¡ˆè®¾è®¡**:
1. **æºå¤´ä¿®å¤**: åœ¨`TimeStampConfig`ä¸­å¢žåŠ é‡å»ºç¼“å†²é…ç½®
   ```python
   reconstruction_buffer_frames: int = 3  # ä¸ºé‡å»ºé¢„ç•™çš„å¸§æ•°ç¼“å†²
   enable_reconstruction_buffer: bool = True  # æ˜¯å¦å¯ç”¨é‡å»ºç¼“å†²
   ```

2. **è‡ªåŠ¨åŒ–å¤„ç†**: ä¿®æ”¹å›¾åƒé¢„å¤„ç†é€»è¾‘
   - è‡ªåŠ¨å¤åˆ¶æœ€åŽå‡ å¼ å›¾åƒä½œä¸ºæ—¶é—´ç¼“å†²
   - æ‰©å±•å›¾åƒåºåˆ—: 200å¼  â†’ 203å¼ ï¼ˆå«3å¼ ç¼“å†²ï¼‰
   - æ‰©å±•æ—¶é—´èŒƒå›´: [0, 199000]Î¼s â†’ [0, 202000]Î¼s
   - è¿”å›žç»“æžœ: ä»ç„¶ä¿æŒ200å¼ å›¾åƒçš„é€»è¾‘å…³ç³»

3. **å‘åŽå…¼å®¹**: ä¸ç ´åçŽ°æœ‰çš„200:200å¯¹åº”é€»è¾‘

**ä¿®å¤éªŒè¯**:
- **æ—¶é—´ç¼“å†²**: ä¸ºæœ€åŽä¸€å¼ å›¾åƒé¢„ç•™3msçš„æœªæ¥äº‹ä»¶ âœ…
- **å®Œç¾Žå¯¹åº”**: é¢„æœŸå®žçŽ°200å¼ è¾“å…¥â†’200å¼ é‡å»º âœ…
- **æ–‡ä»¶åæ˜ å°„**: é‡å»º0001.png-0200.png â†” åŽŸå§‹0001.png-0200.png âœ…
- **æ—¶é—´æˆ³ç²¾ç¡®å¯¹é½**: æ¯å¼ é‡å»ºå›¾åƒå¯¹åº”ç¡®åˆ‡çš„åŽŸå§‹æ—¶é—´æˆ³ âœ…

**æŠ€æœ¯çªç ´**: è¿™æ˜¯"å¥½å“å‘³"è§£å†³æ–¹æ¡ˆçš„å…¸åž‹æ¡ˆä¾‹â€”â€”åœ¨æ ¹æºå¤„è§£å†³é—®é¢˜ï¼Œæ¶ˆé™¤ç‰¹æ®Šæƒ…å†µï¼Œè€Œä¸æ˜¯åœ¨ç»“æžœä¸Šæ‰“è¡¥ä¸ã€‚

**âš ï¸ é‡è¦æé†’**: æ–°çš„æ—¶é—´æˆ³ç¼“å†²é€»è¾‘å·²å®žçŽ°ä½†ä»éœ€è¦å……åˆ†çš„debugå’Œæµ‹è¯•éªŒè¯ï¼Œå¯èƒ½å­˜åœ¨æœªå‘çŽ°çš„bugæˆ–è¾¹ç•Œæƒ…å†µé—®é¢˜ã€‚éœ€è¦å®Œæ•´è¿è¡Œpipelineå¹¶éªŒè¯å®žé™…æ•ˆæžœã€‚
### âœ… æ–°å¢žå®Œæˆæ¨¡å—ï¼ˆ2025-09-21ï¼‰
7. **ä½å§¿å®Œç¾Žå¯¹é½ç³»ç»Ÿ** âœ…
   - **æ—¶é—´æˆ³ç²¾ç¡®å¯¹é½**: é‡å»ºå›¾åƒ1-200ä¸ŽåŽŸå§‹å›¾åƒ1-200æ—¶é—´æˆ³å®Œå…¨ä¸€è‡´ï¼ˆè¯¯å·®0.000msï¼‰
   - **ä½å§¿ä¸€è‡´æ€§ä¿è¯**: é‡å»ºçš„ç¬¬iå¼ å›¾åƒä¸ŽåŽŸå§‹ç¬¬iå¼ å›¾åƒå…·æœ‰å®Œå…¨ç›¸åŒçš„ç›¸æœºä½å§¿
   - **æ–‡ä»¶åæ˜ å°„**: é‡å»ºçš„0001.png-0200.png â†” åŽŸå§‹çš„0001.png-0200.pngï¼Œä½å§¿å®Œå…¨å¯¹é½
   - **200:200å®Œç¾Žå¯¹åº”**: æ¯å¼ é‡å»ºå›¾åƒéƒ½æœ‰ç²¾ç¡®çš„ä½å§¿å¯¹åº”å…³ç³»

8. **å¤šæ–¹æ³•é‡å»ºå®žéªŒç»“æžœ** âœ… (**2025-09-21å®Œæˆ**)
   - **æˆåŠŸæ–¹æ³• (4/8)**: E2VID, FireNet, SPADE-E2VID, SSL-E2VID
   - **å¤±è´¥æ–¹æ³• (4/8)**: E2VID+, FireNet+, ET-Net, HyperE2VID (Windowsè·¯å¾„å…¼å®¹æ€§é—®é¢˜)
   - **æ€§èƒ½æŽ’å**:
     * **æœ€ä½³è´¨é‡**: SSL-E2VID (MSE=0.046, SSIM=0.698, LPIPS=0.327)
     * **æ¬¡ä¼˜è´¨é‡**: SPADE-E2VID (MSE=0.099, SSIM=0.560, LPIPS=0.339)
     * **æœ€å¿«é€Ÿåº¦**: FireNet (21.13ms, MSE=0.170)
     * **ç»å…¸æ–¹æ³•**: E2VID (43.27ms, MSE=0.189)
   - **æ•°æ®äº§å‡º**: 800å¼ é‡å»ºå›¾åƒ (4æ–¹æ³•Ã—200å¼ )ï¼Œå®Œç¾Ž200:200å¯¹åº”

### ðŸ“‹ å¾…å®žæ–½æ¨¡å—ï¼ˆä¼˜å…ˆçº§è¿›ä¸€æ­¥é™ä½Žï¼‰
8. **ç»“æžœéªŒè¯æ¨¡å—**
   - æ–‡ä»¶å®Œæ•´æ€§è‡ªåŠ¨æ£€æŸ¥
   - æ—¶é—´æˆ³ä¸€è‡´æ€§éªŒè¯
   - å›¾åƒè´¨é‡è¯„ä¼°æŠ¥å‘Š

## ðŸš¨ åŽ†å²é—®é¢˜è®°å½•ï¼ˆå·²å…¨éƒ¨è§£å†³ï¼‰

### 1. è·¯å¾„ç®¡ç†é—®é¢˜ (å·²è§£å†³)
- **é—®é¢˜**: DVSè¾“å‡ºåœ¨tempç›®å½•ï¼Œä¸ç¬¦åˆæ•°æ®å­˜å‚¨è§„èŒƒ
- **è§£å†³**: ä¿®æ­£ä¸ºç›´æŽ¥è¾“å‡ºåˆ° `datasets/lego/events_dvs/`
- **çŠ¶æ€**: å·²æ›´æ–°æ‰€æœ‰ç›¸å…³æ¨¡å—çš„è·¯å¾„å¼•ç”¨

### 2. åæ ‡ç³»ç»Ÿbug (å·²è§£å†³)
- **é—®é¢˜**: X,Yåæ ‡è¢«é”™è¯¯äº¤æ¢ï¼Œå¯¼è‡´é‡å»ºå›¾åƒæ–¹å‘/å°ºå¯¸é”™è¯¯
- **è§£å†³**: é‡æ–°ç”Ÿæˆæ­£ç¡®çš„EVREALæ–‡ä»¶ï¼Œç¡®ä¿åæ ‡å¯¹åº”å…³ç³»
- **çŠ¶æ€**: æ‰€æœ‰199å¼ é‡å»ºå›¾åƒå‡ä¸ºæ­£ç¡®çš„480x640å°ºå¯¸

## ðŸŽ¯ å®žéªŒå·¥ä½œæµç¨‹ï¼ˆæ›´æ–°ç‰ˆï¼‰

### é˜¶æ®µ1: æ•°æ®å‡†å¤‡ âœ…å®Œæˆ
```bash
# æ•°æ®é›†åˆå¹¶
python merge_datasets.py

# å›¾åƒé¢„å¤„ç†
python modules/image_preprocessor.py
```

### é˜¶æ®µ2: äº‹ä»¶ä»¿çœŸ âœ…å®Œæˆ  
```bash
# DVSäº‹ä»¶ä»¿çœŸ
python modules/dvs_simulator.py

# æ ¼å¼è½¬æ¢
python modules/format_converter.py
```

### é˜¶æ®µ3: å›¾åƒé‡å»º âœ…å®Œå…¨æ­£å¸¸
```bash
# EVREALå›¾åƒé‡å»º
python modules/evreal_integration.py
```

### é˜¶æ®µ4: å®Œæ•´Pipeline âœ…å®Œå…¨æ­£å¸¸
```bash
# ä¸€é”®å¼ç«¯åˆ°ç«¯æ‰§è¡Œ
python run_full_pipeline.py
```

### é˜¶æ®µ5: ç»“æžœåˆ†æž ðŸ“‹å¯é€‰æ‰©å±•
- æ—¶é—´æˆ³å¯¹é½éªŒè¯
- é‡å»ºè´¨é‡è¯„ä¼°
- ä¸ŽåŽŸå§‹å›¾åƒå¯¹æ¯”

## ðŸ“ å½“å‰æ•°æ®ç»“æž„
```
datasets/lego/
â”œâ”€â”€ train/                  # åŽŸå§‹è®­ç»ƒå›¾åƒ (200å¼ flareç‰ˆæœ¬)
â”œâ”€â”€ test/                   # åŽŸå§‹æµ‹è¯•å›¾åƒ (200å¼ normalç‰ˆæœ¬) 
â”œâ”€â”€ points3d.ply           # 3Dç‚¹äº‘æ–‡ä»¶ (1,518,714ç‚¹ï¼Œå·²ä¿®å¤æ ¼å¼å…¼å®¹æ€§)
â”œâ”€â”€ transforms_train.json  # è®­ç»ƒé›†ä½å§¿æ–‡ä»¶
â”œâ”€â”€ transforms_test.json   # æµ‹è¯•é›†ä½å§¿æ–‡ä»¶
â”œâ”€â”€ events_dvs/            # DVSåŽŸå§‹äº‹ä»¶æ•°æ®
â”‚   â””â”€â”€ lego_train_events.txt  # 4,771,501ä¸ªäº‹ä»¶ï¼Œæ ¼å¼[t,x,y,p]
â”œâ”€â”€ events_evreal/         # EVREALæ ‡å‡†æ ¼å¼
â”‚   â”œâ”€â”€ events_ts.npy      # æ—¶é—´æˆ³(ç§’)
â”‚   â”œâ”€â”€ events_xy.npy      # åæ ‡[x,y] - å·²ä¿®å¤ï¼Œæ­£ç¡®å¯¹åº”
â”‚   â”œâ”€â”€ events_p.npy       # æžæ€§
â”‚   â”œâ”€â”€ metadata.json      # å…ƒæ•°æ®
â”‚   â””â”€â”€ sequence/          # EVREALå·¥ä½œç›®å½•
â”‚       â”œâ”€â”€ events_*.npy   # äº‹ä»¶æ•°æ®å‰¯æœ¬
â”‚       â”œâ”€â”€ images.npy     # çœŸå€¼å›¾åƒ (200,480,640,3)
â”‚       â”œâ”€â”€ images_ts.npy  # å›¾åƒæ—¶é—´æˆ³
â”‚       â””â”€â”€ image_event_indices.npy
â”œâ”€â”€ events_h5/             # H5æ ¼å¼
â”‚   â””â”€â”€ lego_sequence.h5
â””â”€â”€ reconstruction/        # é‡å»ºç»“æžœç›®å½•
    â”œâ”€â”€ evreal_e2vid/      # E2VIDé‡å»ºç»“æžœ (200å¼ 480x640å›¾åƒï¼Œå®Œç¾Žå¯¹åº”)
    â”œâ”€â”€ evreal_firenet/    # FireNeté‡å»ºç»“æžœ (200å¼ )
    â”œâ”€â”€ evreal_spade-e2vid/ # SPADE-E2VIDé‡å»ºç»“æžœ (200å¼ )
    â””â”€â”€ evreal_ssl-e2vid/  # SSL-E2VIDé‡å»ºç»“æžœ (200å¼ )
```

## ðŸŽ‰ é¡¹ç›®æˆåŠŸçŠ¶æ€æ€»ç»“ï¼ˆ2025-09-24æœ€æ–°æ›´æ–°ï¼‰

### âœ… å·²å®Œæˆçš„é‡è¦å·¥ä½œï¼ˆ2025-09-24ï¼‰

#### **H5æ•°æ®æ ¼å¼é”™ä½ä¿®å¤** âœ… **å®Œå…¨ä¿®å¤**
- **é—®é¢˜å‘çŽ°**: H5æ–‡ä»¶ä¸­t/x/y/på­—æ®µé”™ä½ï¼ŒDVSæ ¼å¼`[timestamp_us, x, y, polarity]`è¢«é”™è¯¯ä¿å­˜ä¸º`[y, timestamp_us, x, polarity]`
- **ä¿®å¤èŒƒå›´**: 
  * `pipeline_architecture.py`: `dvs_to_h5`å’Œ`h5_to_dvs`å‡½æ•°åˆ—ç´¢å¼•ä¿®æ­£
  * `modules/format_converter.py`: `convert_dvs_to_h5`å’Œ`h5_to_dvs_txt`å‡½æ•°åˆ—ç´¢å¼•ä¿®æ­£
- **éªŒè¯ç»“æžœ**: 
  * ä¿®å¤å‰H5: t[0,479], x[225,199000], y[20,639] âŒ (å­—æ®µé”™ä½)
  * ä¿®å¤åŽH5: t[225,199000], x[20,639], y[0,479] âœ… (å®Œå…¨æ­£ç¡®)
- **æ•°æ®ä¿æŠ¤**: é”™è¯¯ç‰ˆæœ¬å¤‡ä»½ä¸º`lego_sequence_backup_wrong.h5`

#### **H5æ‰¹é‡é‡å»ºè„šæœ¬å¼€å‘** âš ï¸ **è¿›è¡Œä¸­**
- **è„šæœ¬æ–‡ä»¶**: `batch_h5_reconstruction.py` âœ… å·²åˆ›å»º
- **åŠŸèƒ½è®¾è®¡**: 
  * æ‰«æ`events_h5/`ç›®å½•ä¸­æ‰€æœ‰H5æ–‡ä»¶ï¼ˆè·³è¿‡backupï¼‰
  * å¯¹æ¯ä¸ªH5æ–‡ä»¶: H5â†’EVREALæ ¼å¼è½¬æ¢ â†’ EVREALé‡å»º â†’ ç»“æžœå¤åˆ¶
  * è¾“å‡ºç›®å½•æŒ‰H5æ–‡ä»¶åå‘½å: `reconstruction_lego_sequence`, `reconstruction_lego_sequence_Unet`ç­‰
- **æž¶æž„è®¾è®¡**: å®Œå…¨å¤ç”¨ä¸€é”®å¼pipelineçš„æˆåŠŸé…ç½®ï¼Œåªæ›¿æ¢äº‹ä»¶æ•°æ®
  * ðŸ“ å¤ç”¨`datasets/lego/events_evreal/sequence/`ä¸­çš„images/ã€metadata.jsonã€image_event_indices.npyç­‰
  * ðŸ”„ åªæ›¿æ¢events_ts.npyã€events_xy.npyã€events_p.npyä¸‰ä¸ªäº‹ä»¶æ–‡ä»¶
  * âš™ï¸ å¤ç”¨ä¸€é”®å¼çš„EVREALæ•°æ®é›†é…ç½®å’Œè°ƒç”¨æ–¹å¼

#### **å½“å‰å‘çŽ°çš„H5æ–‡ä»¶** âœ… **å·²ç¡®è®¤**
```
datasets/lego/events_h5/
â”œâ”€â”€ lego_sequence.h5                    # 4,771,501ä¸ªäº‹ä»¶ (åŽŸå§‹DVSæ•°æ®)
â”œâ”€â”€ lego_sequence_Unet.h5              # 1,625,389ä¸ªäº‹ä»¶ (UNetå¤„ç†åŽ)  
â”œâ”€â”€ lego_sequence_Unetsimple.h5        # 2,024,551ä¸ªäº‹ä»¶ (UNet Simpleå¤„ç†åŽ)
â””â”€â”€ lego_sequence_backup_wrong.h5      # å¤‡ä»½çš„é”™è¯¯ç‰ˆæœ¬ (è·³è¿‡)
```

### âš ï¸ å½“å‰å¾…è§£å†³çš„å…³é”®é—®é¢˜ï¼ˆ2025-09-24ï¼‰

#### **é—®é¢˜1: EVREALé…ç½®è·¯å¾„é”™è¯¯** ðŸ” **éœ€è¦Debug**
- **é”™è¯¯çŽ°è±¡**: `FileNotFoundError: 'config/dataset/batch_lego_sequence.json'`
- **å·²ä¿®æ­£**: EVREALå®žé™…é…ç½®è·¯å¾„ä¸º`config/dataset/`ä¸æ˜¯`configs/datasets/`
- **çŠ¶æ€**: è·¯å¾„å·²ä¿®æ­£ä½†ä»éœ€éªŒè¯æ˜¯å¦å®Œå…¨è§£å†³

#### **é—®é¢˜2: æ‰¹é‡é‡å»ºè€—æ—¶è¿‡é•¿ä¸”è¾“å‡ºç›®å½•ä¸ºç©º** ðŸ” **éœ€è¦Debug**  
- **çŽ°è±¡æè¿°**: 
  * è¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œå¯èƒ½å¡åœ¨EVREALé‡å»ºé˜¶æ®µ
  * `reconstruction_lego_sequence`ç­‰è¾“å‡ºç›®å½•åˆ›å»ºä½†ä¸ºç©º
  * æ²¡æœ‰çœ‹åˆ°æˆåŠŸçš„é‡å»ºå›¾åƒè¾“å‡º
- **å¯èƒ½åŽŸå› **: 
  * EVREALé‡å»ºè¿‡ç¨‹ä¸­æ–­æˆ–å¤±è´¥
  * ç»“æžœå¤åˆ¶é€»è¾‘æœ‰è¯¯ï¼Œæ²¡æœ‰æ­£ç¡®å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•
  * é‡å»ºæ–¹æ³•ä¹‹é—´å¯èƒ½å­˜åœ¨è¦†ç›–é—®é¢˜

#### **é—®é¢˜3: ç»“æžœå¤åˆ¶å’Œç›®å½•ç®¡ç†** ðŸ” **éœ€è¦éªŒè¯**
- **å…³é”®é£Žé™©**: å¤šä¸ªH5æ–‡ä»¶å¤„ç†æ—¶ï¼Œé‡å»ºç»“æžœå¯èƒ½ç›¸äº’è¦†ç›–
- **éœ€è¦ç¡®è®¤**: 
  * æ¯ä¸ªH5æ–‡ä»¶æ˜¯å¦ç”Ÿæˆç‹¬ç«‹çš„è¾“å‡ºç›®å½•
  * EVREALçš„outputsç›®å½•æ˜¯å¦ä¼šè¢«åŽç»­å¤„ç†è¦†ç›–
  * å¤åˆ¶é€»è¾‘æ˜¯å¦æ­£ç¡®åŒ¹é…æ–‡ä»¶åæ¨¡å¼

### ðŸŽ¯ ä¸‹æ¬¡Debugé‡ç‚¹ä»»åŠ¡

1. **éªŒè¯EVREALè°ƒç”¨**:
   - æ‰‹åŠ¨æµ‹è¯•å•ä¸ªæ•°æ®é›†çš„EVREALé‡å»ºæ˜¯å¦æˆåŠŸ
   - æ£€æŸ¥EVREALè¾“å‡ºç›®å½•`/mnt/e/2025/event_flick_flare/EVREAL-main/EVREAL-main/outputs`
   - ç¡®è®¤é‡å»ºæ–¹æ³•å‘½åå’Œæ–‡ä»¶åŒ¹é…é€»è¾‘

2. **ä¼˜åŒ–æ‰¹é‡å¤„ç†æµç¨‹**:
   - æ·»åŠ è¯¦ç»†çš„è¿›åº¦è¾“å‡ºå’Œè¶…æ—¶å¤„ç†
   - å®žçŽ°"å®Œæˆä¸€ä¸ªåºåˆ—ç«‹å³å¤åˆ¶"çš„ç­–ç•¥é¿å…è¦†ç›–
   - æ·»åŠ é‡å»ºç»“æžœéªŒè¯é€»è¾‘

3. **æµ‹è¯•ç­–ç•¥**:
   - å…ˆæµ‹è¯•å•ä¸ªH5æ–‡ä»¶çš„å®Œæ•´æµç¨‹
   - éªŒè¯æ—¶é—´æˆ³å¯¹é½å’Œ200:200å›¾åƒå¯¹åº”
   - ç¡®è®¤å¤šä¸ªH5æ–‡ä»¶ä¸ä¼šç›¸äº’å¹²æ‰°

## ðŸŽ‰ åŽ†å²é¡¹ç›®æˆåŠŸçŠ¶æ€æ€»ç»“ï¼ˆ2025-09-21å®Œæˆç‰ˆæœ¬ï¼‰

### âœ… æ ¸å¿ƒæŠ€æœ¯æˆå°± (æœ€ç»ˆç‰ˆæœ¬)
- **å®Œæ•´Pipeline**: ä»Žlegoç‚«å…‰æ•°æ®é›†åˆ°äº‹ä»¶ç›¸æœºé‡å»ºçš„ç«¯åˆ°ç«¯æµç¨‹
- **åæ ‡ç³»ç»Ÿç»Ÿä¸€**: X,Yåæ ‡å˜æ¢å®Œå…¨æ­£ç¡®ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒæ•´
- **ðŸŽ¯ å®Œç¾Ž200:200å¯¹åº”**: é€šè¿‡æ™ºèƒ½è¡¥å…¨ç¬¬200å¼ å›¾åƒï¼Œå®žçŽ°åŽŸå§‹å›¾åƒä¸Žé‡å»ºå›¾åƒçš„å®Œç¾Žå¯¹åº”
- **å¤šæ–¹æ³•é‡å»ºæˆåŠŸ**: 4ç§æ–¹æ³•æˆåŠŸé‡å»º (E2VID, FireNet, SPADE-E2VID, SSL-E2VID)ï¼Œ4ç§æ–¹æ³•å¤±è´¥ (è·¯å¾„å…¼å®¹æ€§é—®é¢˜)
- **Between-framesæœºåˆ¶æ·±åº¦è§£æž**: é€šè¿‡æºä»£ç åˆ†æžå®Œå…¨ç†è§£EVREALçš„æ—¶é—´çª—å£é‡å»ºé€»è¾‘
- **æ•°å­¦æžé™çªç ´**: åœ¨between_framesçš„N-1é™åˆ¶åŸºç¡€ä¸Šï¼Œé€šè¿‡æ™ºèƒ½è¡¥å…¨å®žçŽ°200:200å¯¹åº”
- **é‡å»ºè´¨é‡æŽ’å**: SSL-E2VIDæœ€ä½³ (MSE=0.046), SPADE-E2VIDæ¬¡ä¹‹ (MSE=0.099), FireNetå¿«é€Ÿ (21ms)
- **æ•°æ®ä¸€è‡´æ€§**: 800å¼ é‡å»ºå›¾åƒ (4æ–¹æ³•Ã—200å¼ )ï¼Œç»Ÿä¸€çš„480x640å°ºå¯¸ï¼Œå®Œç¾Žçš„æ–‡ä»¶åå¯¹åº”
- **æ–‡ä»¶åæ˜ å°„**: é‡å»ºçš„0001.png-0200.png â†” åŽŸå§‹çš„0001.png-0200.pngï¼Œå®Œç¾Ž200:200å¯¹åº”

### ðŸ› ï¸ æŠ€æœ¯è§„èŒƒç¡®è®¤
- **DVSæ ¼å¼**: `[timestamp_us, x, y, polarity]` - Xâˆˆ[20,639], Yâˆˆ[0,479]
- **EVREALæ ¼å¼**: `events_xy.npy` - æ­£ç¡®çš„[x,y]åæ ‡å¯¹åº”
- **é‡å»ºå›¾åƒ**: 480x640 (HÃ—W) æ ¼å¼ï¼Œä¸ŽåŽŸå§‹å›¾åƒå®Œå…¨ä¸€è‡´
- **æ—¶é—´æˆ³å¯¹é½**: 199å¼ é‡å»ºå›¾åƒæ—¶é—´æˆ³ä¸ŽåŽŸå§‹å›¾åƒç²¾ç¡®ä¸€è‡´ï¼ˆè¯¯å·®0.000msï¼‰
- **æ–‡ä»¶å‘½å**: é‡å»º0001.png-0199.png â†” åŽŸå§‹0001.png-0199.pngï¼Œä½å§¿å®Œå…¨å¯¹é½
- **è¯„ä¼°çŽ¯å¢ƒ**: Umain2 condaçŽ¯å¢ƒï¼Œå®Œå…¨å…¼å®¹

### ðŸŽ¯ äº‹ä»¶ç›¸æœºé‡å»ºæ–¹æ³•çš„æ—¶é—´æˆ³è¯­ä¹‰ (æœ€ç»ˆç¡®è®¤)
- **EVREALçš„between_framesæ¨¡å¼**: ä½¿ç”¨äº‹ä»¶çª—å£[t_i, t_{i+1}]é‡å»º**æ—¶åˆ»t_i**çš„å›¾åƒ
- **é‡å»ºæ—¶é—´æˆ³å¯¹åº”**: frame_N.png â†” æ—¶é—´æˆ³t_N â†” åŽŸå§‹å›¾åƒN+1
- **æ—¶é—´åç½®**: é‡å»ºå›¾åƒç›¸å¯¹äº‹ä»¶çª—å£èµ·å§‹æ—¶åˆ»æœ‰**0åç½®**ï¼Œä½†ç›¸å¯¹ç†è®º0æ—¶åˆ»æœ‰**+225Î¼så›ºå®šåç§»**
- **å®žé™…æ—¶é—´æˆ³**: frame_i â†” (äº‹ä»¶èµ·å§‹æ—¶é—´0.000225s + iÃ—1ms) â†” åŽŸå§‹å›¾åƒi+1
- **âŒ æ•°å­¦é™åˆ¶ï¼ˆä¸å¯çªç ´ï¼‰**: EVREALç¡¬ç¼–ç  `self.length = self.num_frames - 1`
- **âŒ æ•°æ®é™åˆ¶**: è¦æ±‚ `len(images) == len(images_ts)`ï¼Œä¸å…è®¸N+1ä¸ªæ—¶é—´æˆ³
- **ðŸ“Š æœ€ç»ˆç»“è®º**: 200å¼ åŽŸå§‹å›¾åƒ â†’ 199å¼ é‡å»ºå›¾åƒ (between_framesæ•°å­¦æžé™)
- **âœ… ä½å§¿å¯¹é½**: 199å¼ é‡å»ºå›¾åƒä¸ŽåŽŸå§‹å›¾åƒ1-199å®Œç¾Žå¯¹é½ï¼ˆ0.000msè¯¯å·®ï¼‰

## ðŸŽ¯ 3DGSé›†æˆçŠ¶æ€ (2025-09-22æ›´æ–°)

### âœ… **3D Gaussian Splattingè®­ç»ƒå°±ç»ª**
- **ç‚¹äº‘åŠ è½½é—®é¢˜**: âœ… **å·²å®Œå…¨è§£å†³** - ä¿®å¤PLYæ ¼å¼å…¼å®¹æ€§å’Œåžƒåœ¾å¼‚å¸¸å¤„ç†
- **å…¬å¹³åˆå§‹åŒ–ç­–ç•¥**: âœ… **å·²å®žçŽ°** - éšæœºç°è‰²ç‚¹äº‘åˆå§‹åŒ–ï¼Œé¿å…é¢„åˆ¶bias
- **ç°åº¦å›¾è®­ç»ƒ**: âœ… **å®Œå…¨æ”¯æŒ** - ç«¯åˆ°ç«¯ç°åº¦å›¾è®­ç»ƒpipeline
- **Windowså…¼å®¹æ€§**: âœ… **å·²éªŒè¯** - åœ¨WindowsçŽ¯å¢ƒä¸‹æ­£å¸¸è¿è¡Œ

### ðŸš€ **è®­ç»ƒå‘½ä»¤**
```bash
# è¿›å…¥3DGSç›®å½•
cd gaussian-splatting

# ç°åº¦å›¾è®­ç»ƒ (ä¸Žäº‹ä»¶ç›¸æœºé‡å»ºå…¬å¹³æ¯”è¾ƒ)
python train.py -s ../datasets/lego -m output/lego_grayscale --iterations 7000 --grayscale

# åŒ…å«PDTSæ™ºèƒ½è§†å›¾é€‰æ‹©çš„è®­ç»ƒ
python train.py -s ../datasets/lego -m output/lego_grayscale_pdts --iterations 7000 --grayscale --pdts --num_selected_views 4
```

### ðŸ“Š **é¢„æœŸè¾“å‡º**
```
Original point cloud: 1518714 points
Spatial range: X[-1.23, 1.45], Y[-0.98, 1.67], Z[-0.87, 1.23]  
Generated random point cloud with 1518714 gray points in same bounds
```

### ðŸŽ¯ **å®žéªŒè®¾è®¡å®Œæ•´æ€§**
çŽ°åœ¨å¯ä»¥è¿›è¡Œå®Œæ•´çš„äº‹ä»¶ç›¸æœº3Dé‡å»ºvsä¼ ç»Ÿ3DGSçš„å…¬å¹³æ¯”è¾ƒï¼š
1. **äº‹ä»¶ç›¸æœºè·¯å¾„**: lego_flare â†’ DVSä»¿çœŸ â†’ EVREALé‡å»º â†’ 200å¼ ç°åº¦å›¾
2. **3DGSè·¯å¾„**: lego_flare â†’ éšæœºç‚¹äº‘åˆå§‹åŒ– â†’ 3DGSè®­ç»ƒ â†’ ç°åº¦å›¾æ¸²æŸ“
3. **æ¯”è¾ƒåŸºå‡†**: ä¸¤ç§æ–¹æ³•éƒ½ä½¿ç”¨ç›¸åŒçš„200å¼ flareå›¾åƒï¼Œè¾“å‡ºç°åº¦å›¾ç»“æžœ

## âš ï¸ é‡è¦æé†’
- **ðŸš¨ çŽ¯å¢ƒä¿æŠ¤é“å¾‹**: ç»å¯¹ä¸å¯ä»¥ç ´åcondaçŽ¯å¢ƒä¸­çš„å·²æœ‰åŒ…ï¼åªèƒ½æ·»åŠ æ–°åŒ…ï¼Œä¸èƒ½å‡çº§/é™çº§çŽ°æœ‰åŒ…ï¼
- **ðŸ”¥ CRITICAL**: äº‹ä»¶ç›¸æœºpipelineä½¿ç”¨Umain2çŽ¯å¢ƒï¼Œ3DGSä½¿ç”¨3dgsçŽ¯å¢ƒ
- **ðŸ”¥ CRITICAL**: H5æ‰¹é‡é‡å»ºè„šæœ¬å¿…é¡»åœ¨Umain2çŽ¯å¢ƒä¸­è¿è¡Œ: `source ~/miniconda3/etc/profile.d/conda.sh && conda activate Umain2`
- **åæ ‡ç³»ç»Ÿ**: å·²å®Œå…¨ä¿®å¤ï¼Œç¡®ä¿X,Yåæ ‡æ­£ç¡®å¯¹åº”
- **æ–‡ä»¶å‘½å**: ä¸¥æ ¼æŒ‰ç…§ `lego_train_events.txt` ç­‰è§„èŒƒå‘½å
- **æ—¶é—´æˆ³æ ¼å¼**: DVSä½¿ç”¨å¾®ç§’ï¼ŒEVREALä½¿ç”¨ç§’ï¼ŒH5ä¿æŒå¾®ç§’
- **ç‚¹äº‘åˆå§‹åŒ–**: 3DGSçŽ°ä½¿ç”¨éšæœºç°è‰²ç‚¹äº‘ï¼Œç¡®ä¿å…¬å¹³æ¯”è¾ƒ

## ðŸ› ï¸ æ‰¹é‡é‡å»ºè„šæœ¬ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¯åŠ¨å‘½ä»¤
```bash
# æ¿€æ´»Umain2çŽ¯å¢ƒå¹¶è¿è¡Œæ‰¹é‡é‡å»º
source ~/miniconda3/etc/profile.d/conda.sh && conda activate Umain2 && python batch_h5_reconstruction.py
```

### è„šæœ¬åŠŸèƒ½æ¦‚è¿°
- **è¾“å…¥**: `datasets/lego/events_h5/`ä¸­çš„æ‰€æœ‰H5æ–‡ä»¶ï¼ˆé™¤backupï¼‰
- **å¤„ç†**: æ¯ä¸ªH5æ–‡ä»¶ â†’ H5â†’EVREALè½¬æ¢ â†’ EVREALé‡å»º â†’ ç»“æžœå¤åˆ¶
- **è¾“å‡º**: `datasets/lego/reconstruction_*`ç›®å½•ï¼ŒæŒ‰H5æ–‡ä»¶åå‘½å
- **æ–¹æ³•**: E2VID, FireNet, SPADE-E2VID, SSL-E2VID (4ç§æˆåŠŸæ–¹æ³•)

### å½“å‰è„šæœ¬æ‰§è¡ŒçŠ¶æ€ï¼ˆ2025-09-24 15:30ï¼‰
```
âœ… è„šæœ¬åˆ›å»º: batch_h5_reconstruction.py (17KB)
âœ… ç›®å½•åˆ›å»º: reconstruction_lego_sequence, reconstruction_lego_sequence_Unet, reconstruction_lego_sequence_Unetsimple (å‡ä¸ºç©º)
âœ… H5æ•°æ®: 3ä¸ªæœ‰æ•ˆH5æ–‡ä»¶ + 1ä¸ªbackup (æ€»è®¡309MB)
âš ï¸  é‡å»ºç»“æžœ: æ‰€æœ‰è¾“å‡ºç›®å½•ä¸ºç©ºï¼Œè¡¨æ˜ŽEVREALé‡å»ºæˆ–ç»“æžœå¤åˆ¶å¤±è´¥
```

### å½“å‰å·²çŸ¥é—®é¢˜
1. **EVREALé…ç½®è·¯å¾„é—®é¢˜**ï¼ˆå·²ä¿®æ­£è·¯å¾„ä½†éœ€éªŒè¯ï¼‰
   - é”™è¯¯ï¼š`FileNotFoundError: 'config/dataset/batch_lego_sequence.json'`
   - ä¿®æ­£ï¼šè·¯å¾„ä»Ž`configs/datasets/`æ”¹ä¸º`config/dataset/`
2. **é‡å»ºè€—æ—¶é•¿ä¸”è¾“å‡ºç›®å½•ç©º**ï¼ˆå…³é”®é—®é¢˜ï¼‰
   - çŽ°è±¡ï¼š3ä¸ªreconstruction_*ç›®å½•å·²åˆ›å»ºä½†å®Œå…¨ä¸ºç©º
   - å¯èƒ½åŽŸå› ï¼šEVREALé‡å»ºå¤±è´¥ã€ç»“æžœå¤åˆ¶é€»è¾‘é”™è¯¯ã€æˆ–è€…é‡å»ºè¿‡ç¨‹è¢«ä¸­æ–­
3. **å¤šæ–‡ä»¶å¤„ç†å¯èƒ½å­˜åœ¨è¦†ç›–é£Žé™©**ï¼ˆéœ€è¦ä¼˜åŒ–æµç¨‹ï¼‰

## æ•°æ®é›†ç»“æž„

### åŽŸå§‹æ•°æ®é›†
- `lego_flare/`: å¸¦ç‚«å…‰çš„legoæ•°æ®é›†
- `lego_normal/`: æ— ç‚«å…‰çš„legoæ•°æ®é›†
- ä¸¤ä¸ªæ•°æ®é›†çš„ä½å§¿ï¼ˆtransform_matrixï¼‰å®Œå…¨ç›¸åŒ
- æ¯ä¸ªæ•°æ®é›†åŒ…å«200å¼ è®­ç»ƒå›¾ç‰‡

### åˆå¹¶åŽæ•°æ®é›†
- `lego/`: åˆå¹¶åŽçš„å®Œæ•´æ•°æ®é›†
  - `train/`: 200å¼ è®­ç»ƒå›¾ç‰‡ï¼ˆæ¥è‡ªlego_flareï¼ŒåŒ…å«ç‚«å…‰ï¼‰
  - `test/`: 200å¼ æµ‹è¯•å›¾ç‰‡ï¼ˆæ¥è‡ªlego_normalï¼Œæ— ç‚«å…‰ï¼‰
  - `transforms_train.json`: è®­ç»ƒé›†ä½å§¿æ–‡ä»¶
  - `transforms_test.json`: æµ‹è¯•é›†ä½å§¿æ–‡ä»¶
  - `points3d.ply`: 3Dç‚¹äº‘æ–‡ä»¶

### è·¯å¾„ä¿®æ­£é—®é¢˜
åŽŸå§‹transformsæ–‡ä»¶ä¸­çš„è·¯å¾„æ ¼å¼ä¸º `"train\\r_00001"`ï¼Œä½†å®žé™…æ–‡ä»¶åä¸º `0001.png`ã€‚
åˆå¹¶è„šæœ¬å·²è‡ªåŠ¨ä¿®æ­£ä¸ºæ­£ç¡®æ ¼å¼ï¼š`"train/0001"` å’Œ `"test/0001"`ã€‚

## è„šæœ¬æ–‡ä»¶

### merge_datasets.py
æ•°æ®é›†åˆå¹¶è„šæœ¬ï¼ŒåŠŸèƒ½åŒ…æ‹¬ï¼š
1. è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰ `*_flare` å’Œ `*_normal` æ•°æ®é›†å¯¹
2. å°†flareç‰ˆæœ¬ä½œä¸ºè®­ç»ƒé›†ï¼Œnormalç‰ˆæœ¬ä½œä¸ºæµ‹è¯•é›†
3. ä¿®æ­£transformsæ–‡ä»¶ä¸­çš„è·¯å¾„æ ¼å¼é”™è¯¯
4. éªŒè¯åˆå¹¶ç»“æžœçš„å®Œæ•´æ€§

ä½¿ç”¨æ–¹æ³•ï¼š
```bash
python3 merge_datasets.py
```

## å®žéªŒè®¾è®¡æ€è·¯
- è®­ç»ƒé˜¶æ®µï¼šä½¿ç”¨å¸¦ç‚«å…‰çš„å›¾ç‰‡è®­ç»ƒæ¨¡åž‹ï¼Œè®©æ¨¡åž‹å­¦ä¼šå¤„ç†ç‚«å…‰å¹²æ‰°
- æµ‹è¯•é˜¶æ®µï¼šä½¿ç”¨æ— ç‚«å…‰çš„å›¾ç‰‡éªŒè¯æ¨¡åž‹åœ¨ç†æƒ³æ¡ä»¶ä¸‹çš„é‡å»ºè´¨é‡
- ä½å§¿å®Œå…¨ç›¸åŒç¡®ä¿äº†è®­ç»ƒå’Œæµ‹è¯•çš„ä¸€è‡´æ€§

## ðŸ“¦ æ¨¡å—è¯¦ç»†è¯´æ˜Ž

### 3D Gaussian Splatting (`gaussian-splatting/`)
**åŠŸèƒ½**: å®žæ—¶3Dåœºæ™¯é‡å»ºå’Œæ–°è§†è§’åˆæˆ
**ç‰¹è‰²**: é›†æˆäº†PDTSæ™ºèƒ½è§†å›¾é€‰æ‹©ç®—æ³•ï¼Œæå‡è®­ç»ƒæ•ˆçŽ‡

#### æ ¸å¿ƒç‰¹æ€§:
- **å®žæ—¶æ¸²æŸ“**: â‰¥30fpsçš„1080pæ–°è§†è§’åˆæˆ
- **æ™ºèƒ½è§†å›¾é€‰æ‹©**: PDTSç¥žç»ç½‘ç»œé¢„æµ‹æŸå¤±ï¼Œæ›¿ä»£ç›´æŽ¥è®¡ç®—
- **æ··åˆé‡‡æ ·ç­–ç•¥**: Bootstrapé˜¶æ®µéšæœºé‡‡æ · + Hybridé˜¶æ®µç½‘ç»œæŒ‡å¯¼é‡‡æ ·
- **é«˜è´¨é‡é‡å»º**: ä¿æŒSOTAè§†è§‰è´¨é‡çš„åŒæ—¶æå‡è®­ç»ƒé€Ÿåº¦

#### å…³é”®æ–‡ä»¶:
- `train.py`: ä¸»è®­ç»ƒè„šæœ¬ï¼ˆé›†æˆPDTSé€‰æ‹©é€»è¾‘ï¼‰
- `render.py`: æ¸²æŸ“è„šæœ¬ï¼Œç”Ÿæˆæ–°è§†è§’å›¾åƒ
- `pdts_integration.py`: PDTSé£Žé™©å­¦ä¹ å™¨å®žçŽ°
- `scene/`: åœºæ™¯æ•°æ®åŠ è½½å’Œç®¡ç†
- `gaussian_renderer/`: é«˜æ–¯å…‰æ …åŒ–æ¸²æŸ“å™¨

#### è¿è¡ŒçŽ¯å¢ƒ:
- **æŽ¨è**: Windows + CUDA GPU
- **åŽŸå› **: ç”¨æˆ·ç†Ÿæ‚‰WindowsçŽ¯å¢ƒï¼ŒGPUåŠ é€Ÿæ•ˆæžœæ›´å¥½

### DVSäº‹ä»¶ç›¸æœºä»¿çœŸå™¨ (`DVS-Voltmeter-main/`)  
**åŠŸèƒ½**: åŸºäºŽéšæœºè¿‡ç¨‹çš„DVSäº‹ä»¶ç›¸æœºä»¿çœŸå™¨
**è®ºæ–‡**: "DVS-Voltmeter: Stochastic Process-based Event Simulator" (ECCV 2022)

#### æ ¸å¿ƒç®—æ³•:
- **éšæœºè¿‡ç¨‹å»ºæ¨¡**: æ¨¡æ‹ŸçœŸå®žDVSä¼ æ„Ÿå™¨çš„å™ªå£°ç‰¹æ€§
- **åƒç´ çº§ä»¿çœŸ**: æ¯ä¸ªåƒç´ ç‹¬ç«‹çš„äº‹ä»¶ç”Ÿæˆè¿‡ç¨‹
- **å‚æ•°åŒ–æ¨¡åž‹**: æ”¯æŒDVS346ã€DVS240ç­‰ä¸åŒç›¸æœºåž‹å·

#### è¾“å…¥è¦æ±‚:
- é«˜å¸§çŽ‡å›¾åƒåºåˆ—ï¼ˆé€šè¿‡è§†é¢‘æ’å€¼èŽ·å¾—ï¼‰
- å›¾åƒæ ¼å¼: PNGæ ¼å¼ï¼ŒæŒ‰æ•°å­—ç¼–å·å‘½å
- é…ç½®æ–‡ä»¶: `info.txt` æè¿°åºåˆ—ä¿¡æ¯

#### è¾“å‡ºæ•°æ®:
- äº‹ä»¶æ•°æ®æµ: (x, y, timestamp, polarity)
- å¯è§†åŒ–ç»“æžœ: äº‹ä»¶ä½“ç´ ç½‘æ ¼è¡¨ç¤º

#### å…³é”®æ–‡ä»¶:
- `main.py`: ä¸»ä»¿çœŸè„šæœ¬
- `src/simulator.py`: äº‹ä»¶ä»¿çœŸå™¨æ ¸å¿ƒç®—æ³•  
- `src/config.py`: ç›¸æœºå‚æ•°é…ç½®
- `src/visualize.py`: äº‹ä»¶æ•°æ®å¯è§†åŒ–

## ðŸ”„ æ•°æ®æµå‘è®¾è®¡

```
åŽŸå§‹æ•°æ®é›† â†’ æ•°æ®é¢„å¤„ç† â†’ 3DGSè®­ç»ƒ â†’ å›¾åƒåºåˆ—ç”Ÿæˆ â†’ äº‹ä»¶ä»¿çœŸ â†’ äº‹ä»¶æ•°æ®é›†
    â†“              â†“           â†“            â†“           â†“
lego_flare/   merge_datasets  gaussian-    render.py   DVS-Voltmeter  
lego_normal/       â†“         splatting/      â†“             â†“
    â†“         datasets/lego/     â†“       é«˜å¸§çŽ‡å›¾åƒ     events.txt
åˆå¹¶æ•°æ®é›†      è®­ç»ƒæµ‹è¯•åˆ†ç¦»    3Dæ¨¡åž‹      åºåˆ—        + å¯è§†åŒ–
```

## ðŸ“‹ å®žéªŒTODOæ¸…å•

### è¿‘æœŸä»»åŠ¡ (ç”¨æˆ·æ‰§è¡Œ):
1. **3DGSè®­ç»ƒæµ‹è¯•**: åœ¨WindowsçŽ¯å¢ƒè¿è¡Œgaussian-splatting
2. **å›¾åƒåºåˆ—ç”Ÿæˆ**: ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡åž‹æ¸²æŸ“é«˜å¸§çŽ‡å›¾åƒåºåˆ—  
3. **åºåˆ—è´¨é‡æ£€æŸ¥**: ç¡®ä¿å›¾åƒè¿žç»­æ€§å’Œæ—¶é—´ä¸€è‡´æ€§

### ä¸­æœŸä»»åŠ¡ (äº‹ä»¶ä»¿çœŸ):
1. **DVSä»¿çœŸå‡†å¤‡**: å‡†å¤‡é«˜å¸§çŽ‡å›¾åƒåºåˆ—è¾“å…¥
2. **å‚æ•°è°ƒä¼˜**: è°ƒæ•´DVSç›¸æœºå‚æ•°åŒ¹é…å®žéªŒéœ€æ±‚
3. **ä»¿çœŸæ‰§è¡Œ**: ç”Ÿæˆäº‹ä»¶æ•°æ®å’Œå¯è§†åŒ–ç»“æžœ
4. **è´¨é‡è¯„ä¼°**: äº‹ä»¶æ•°æ®çš„å™ªå£°æ°´å¹³å’ŒçœŸå®žæ€§åˆ†æž

### é•¿æœŸä»»åŠ¡ (ç³»ç»Ÿé›†æˆ):
1. **ç«¯åˆ°ç«¯Pipeline**: è‡ªåŠ¨åŒ–å®Œæ•´å·¥ä½œæµç¨‹
2. **å¤šåœºæ™¯æ‰©å±•**: æ”¯æŒæ›´å¤šæ•°æ®é›†å’Œåœºæ™¯ç±»åž‹
3. **æ€§èƒ½ä¼˜åŒ–**: å„æ¨¡å—çš„é€Ÿåº¦å’Œå†…å­˜ä¼˜åŒ–
4. **ç»“æžœåˆ†æž**: ç‚«å…‰å¯¹äº‹ä»¶ç›¸æœºä»¿çœŸå½±å“çš„å®šé‡åˆ†æž

## çŽ¯å¢ƒè¦æ±‚

### LinuxçŽ¯å¢ƒ (å½“å‰WSL2):
- Python 3.x
- UmainçŽ¯å¢ƒï¼ˆå·²æœ‰ç›¸å…³Pythonåº“ï¼‰
- ç”¨äºŽæ•°æ®é¢„å¤„ç†å’Œåˆ†æž

### WindowsçŽ¯å¢ƒ (ç”¨æˆ·è´Ÿè´£):
- CUDAæ”¯æŒçš„GPU
- Python + PyTorch
- ç”¨äºŽ3DGSè®­ç»ƒå’Œæ¸²æŸ“

### DVSä»¿çœŸçŽ¯å¢ƒ:
```bash
easydict == 1.9
pytorch >= 1.8  
numpy >= 1.20.1
opencv-python == 4.5.1.48
tqdm == 4.49.0
```